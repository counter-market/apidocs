# Wallet

## Get orders for market

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/orders/DAI/ETH"
  -X GET
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
```

This endpoint returns unfulfilled orders of `<ETHAddress>` wallet in `<StockTokenSymbol>/<CashTokenSymbol>` market

### HTTP Request

`GET <%= data.urls.arbiter %>/wallets/<ETHAddress>/orders/<StockTokenSymbol>/<CashTokenSymbol>`

### URL Parameters

Parameter | Description
--------- | -----------
ETHAddress | ETH address of one of your linked wallets

### Server response

List of `Order`s:

[
  [Order](#order), ...
]

## Get all token accounts

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/token-accounts"
  -X GET
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
```

This endpoint returns all [Token Account](#token-account)s for `<ETHAddress>` wallet

### HTTP Request

`GET <%= data.urls.arbiter %>/wallets/<ETHAddress>/token-accounts`

### Server response

List of `Token account`s for a binded `<ETHAddress>` wallet:

`[
  [Token Account](#token-account), ...
]`

## Get all trades

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/trades"
  -X GET
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
```

This endpoint returns the list of [Trade](#trade)s of `<ETHAddress>` wallet

### HTTP Request

`GET <%= data.urls.arbiter %>/wallets/<ETHAddress>/trades`

### Server response

List of `Trades`s for a binded wallet with given `ETHAddress`:

`[
  [Trade](#trades), ...
]`

## Get nonces

This endpoint returns exchange operation nonces for given `<ETHAddress>` wallet

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/nonces"
  -X GET
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
```

### HTTP Request

`GET <%= data.urls.arbiter %>/wallets/<ETHAddress>/nonces`

### Server response

Dictionary of ETH transaction nonces for each of the exchange operations: `trade`, `withdraw`. Sample:

```json
[
  {
    trade: 12,
    witdraw: 22,
  }
]
```

## Deposit

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/deposits"
  -X PUT
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
  --data '{"tokenCode": 2, "amount": "0xA", "txHash": "0x123"}'
```

Deposit funds to `<ETHAddress>` wallet

### Flow

For depositing `ETH`:

* Invoke `depositEther` method of `TREASURY` smart contract by sending transaction with desired amount of `ETH` to deposit. That transaction's hash is used lately as parameter to an API call.

* Make an API call. transaction's hash

For depositing `ERC-20` tokens:

* Send a transaction to allow `TREASURY` smart contract to operate with desired amount of your `ERC-20` tokens

* Invoke `depositERC20Token` method of `TREASURY` smart contract with the following arguments:

Argument number | Type | Description
0 | string | [Token Account](#token-account) id
1 | string | HEX of amount token in `pennies` to deposit
* Make an API call

### HTTP Request

`PUT <%= data.urls.arbiter %>/wallets/<ETHAddress>/deposits`

### Body JSON Parameters

Parameter | Type | Description
--------- | ---- | -----------
tokenCode | number | Code of the token !!!
amount | string | HEX of deposit amount * 10^token decimal places count
txHash | string | Hash of Ethereum transaction

### Server response

Empty response

## Withdraw

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/withdrawals"
  -X PUT
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
  --data '{"tokenCode": 2, "amount": "0xA", "withdrawAddress": "0x123", "withdrawNonce": 10, "txHash": "0x123"}'
```

Withdraw funds from <ETHAddress> wallet

### Flow

* Sign following structure with wallet's ethereum address you wanna to withdraw funds from

Attribute | Type | Description
--------- | ---- | -----------
tokenCode | uint16 | Token code
withdrawAddress | address | ETH address to withdraw to
amount | uint128 | Amount of funds to withdraw
withdrawNonce | uint64 | wallet's `nonce` for `withdraw` operation

* Make an API call

### HTTP Request

`PUT <%= data.urls.arbiter %>/wallets/<ETHAddress>/withdrawals`

### Body JSON Parameters

Parameter | Type | Description
--------- | ---- | -----------
tokenCode | number | Code of the token !!!
amount | string | !!!
withdrawAddress | string | ETH address to withdraw to
withdrawNonce | number | wallet's `nonce` for `withdraw` operation
signature | string | Ethereum signature

### Server response

Empty response

## Get all fundings

> CURL

```shell
curl "<%= data.urls.arbiter %>/wallets/0x1234567890123456789012345678901234567890/fundings"
  -X GET
  -H "Authorization: YOUR-AUTHORIZATION-KEY"
  -H "Content-Type: application/json"
```

This endpoints returns list of [Funding](#funding)s of <ETHAddress> wallet

### HTTP Request

`PUT <%= data.urls.arbiter %>/wallets/<ETHAddress>/fundings`

### Server response

List of `Funding`s of the wallet binded to `ETHAddress`:

[
  [Funding](#funding), ...
]